# 20220130-防抖和节流

## 问题

现实工作中没见人讨论过这个问题，面试中很常见。某次大厂面试，面试官让我写节流，他给的模板是防抖的模板。大概如下：

```JavaScript
function debounce(fn, delay) {

}
```

我指出了这一点，面试官坚持认为 debounce 就是节流，后来面试挂掉了。

我是机械专业出身，有门课叫液压与气压传动，节流阀的英文单词是 throttle。在机械专业，涉及到弹簧和垫片时，会看到 bounce 这个单词。

防抖的使用场景是监听搜索框的 input 事件，在用户输入完成后，调用接口，在用户持续输入过程中，不调用接口。前端的防抖和单片机的按键防抖程序还不太一样，以前我老记混，现在年纪大了，单片机防抖我基本全忘了，这下不会记混了，也算是个优势。

```JavaScript
function debounce(fn, delay) {
	let timerId
	return function(...args) {
		clearTimeout(timerId)
		timerId = setTimeout(_ => {
			fn.apply(this, args)
		}, delay)
	}
}
```

节流的使用场景是 scroll 事件的处理。

```JavaScript
function throttle(fn, delay) {
	let timerId
	return function (...args) {
		if (timerId) {
			return
		}
		timerId = setTimeout(_ => {
			fn.apply(this, args)
			timerId = null
		}, delay)
	}
}
```

面试过程中还遇到过写了个节流，面试官却说这是防抖，我今天似乎找到了原因。

![throttle](https://raw.githubusercontent.com/xudale/interview/master/assets/throttle.jpeg)

这是红宝书第三版 P615。说的是节流 throttle，代码逻辑写的却是防抖。估算那个大厂面试官的年龄，他坚持认为 debounce 是节流，可能也是受了红宝书的影响吧。

## 参考

1.[函数的防抖和节流是个啥](https://zhuanlan.zhihu.com/p/72923073)

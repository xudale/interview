# 20220307-Vue mixin 合并顺序

失业期间目前面试 8 家，出现 1 次，出现概率 42.86%。虽然没答上来，但我一点也不遗憾，这问题很无聊。

## 问题

说说 Vue mixin 的合并顺序？

## 答案

以下摘自 Vue 官方文档

- 比如，数据对象在内部会进行递归合并，并在发生冲突时以组件数据优先

- 同名钩子函数将合并为一个数组，因此都将被调用。另外，混入对象的钩子将在组件自身钩子之前调用

- 值为对象的选项，例如 methods、components 和 directives，将被合并为同一个对象。两个对象键名冲突时，取组件对象的键值对。

从[源码](https://github.com/vuejs/vue/blob/e90cc60c4718a69e2c919275a999b7370141f3bf/src/core/util/options.js#L388)看，不同的选项有不同的合并策略，如下：

```C++
export function mergeOptions (
  parent: Object,
  child: Object,
  vm?: Component
): Object {
  const options = {}
  let key
  for (key in parent) {
    mergeField(key)
  }
  for (key in child) {
    if (!hasOwn(parent, key)) {
      mergeField(key)
    }
  }
  function mergeField (key) {
  	// 重点在这里
    const strat = strats[key] || defaultStrat
    options[key] = strat(parent[key], child[key], vm, key)
  }
  return options
}
```


## 参考

1.[混入](https://cn.vuejs.org/v2/guide/mixins.html#%E5%85%A8%E5%B1%80%E6%B7%B7%E5%85%A5)


